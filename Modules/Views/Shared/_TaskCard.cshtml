@{
    // Verificăm întâi dacă există un DueDate
    string badgeClass = "bg-secondary";
    string timeText = "Fără termen";

    if (Model.DueDate.HasValue)
    {
        // Folosim .Value pentru a obține data reală
        var timeRemaining = Model.DueDate.Value - DateTime.Now;

        timeText = $"{timeRemaining.Days} zile, {timeRemaining.Hours} ore";

        if (timeRemaining.TotalHours < 0)
        {
            badgeClass = "bg-danger"; // Expirat
            timeText = "Termen depășit!";
        }
        else if (timeRemaining.TotalDays < 1)
        {
            badgeClass = "bg-warning text-dark"; // Urgent
            timeText = "Urgent: " + timeText;
        }
        else
        {
            badgeClass = "bg-success"; // Ok
        }
    }
}